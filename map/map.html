<!DOCTYPE html>

<html>

<head>

<title>Webproject</title>

   <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css"
      integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
      crossorigin=""
    />

    <script
      src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"
      integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew=="
      crossorigin=""
    ></script>

<style>
#map {
    width: 1200px;
    height:700px;
    position : relative;
    left : 100px;
    top: 100px;
}
#petit{
  width: 100px;
  height:50px;
  position : absolute;
  left : 1500px;
  top: 200px;

}

#gros{
  width: 100px;
  height:50px;
  position : absolute;
  left : 1500px;
  top: 300px;

}

#electro{
  width: 100px;
  height:50px;
  position : absolute;
  left : 1500px;
  top: 400px;

}

#annuler{
  width: 100px;
  height:50px;
  position : absolute;
  left : 1500px;
  top: 550px;

}



</style>

</head>

<body>

    <div id="map"></div>

<script>

    var map = L.map('map',{
    center: [45.78341234572953, 4.878173098359132],
    zoom: 16
    });

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(map);



</script>
<button aria-label="petit" (click)=""  class = "Signaler" id = 'petit' onClick = 'clickPetit()'>
  Ajouter petit encombrant
</button>
<button aria-label="gros" (click)=""   class = "Signaler" id = 'gros' onClick = 'clickGros(e)'>
  Ajouter gros encombrant
</button>
<button aria-label="electro" (click)=""   class = "Signaler" id = 'electro' onClick = 'clickElectro()'>
  Ajouter électroménager
</button>
<button aria-label="annuler" (click)=""   class = "Signaler" id = 'annuler' onClick = 'clickAnnuler()'>
  Annuler
</button>


<script>
    
    var popup = L.popup();
    var coord;
    //var petitsEncombrants = L.layerGroup();

    var chairIcon = L.icon({
            iconUrl: './icones/chair.png',
            shadowUrl: './icones/placeholder.png',

            iconSize:     [20, 20], // size of the icon
            shadowSize:   [50, 50], // size of the shadow
            iconAnchor:   [10, 40], // point of the icon which will correspond to marker's location
            shadowAnchor: [25, 50],  // the same for the shadow
            popupAnchor:  [0 ,-50] // point from which the popup should open relative to the iconAnchor

    });
    
    var bedIcon = L.icon({
            iconUrl: './icones/lit.png',
            shadowUrl: './icones/placeholder.png',

            iconSize:     [20, 20], // size of the icon
            shadowSize:   [50, 50], // size of the shadow
            iconAnchor:   [10, 40], // point of the icon which will correspond to marker's location
            shadowAnchor: [25, 50],  // the same for the shadow
            popupAnchor:  [50 ,50] // point from which the popup should open relative to the iconAnchor

    });
    var fourIcon = L.icon({
            iconUrl: './icones/four.png',
            shadowUrl: './icones/placeholder.png',

            iconSize:     [20, 20], // size of the icon
            shadowSize:   [50, 50], // size of the shadow
            iconAnchor:   [10, 40], // point of the icon which will correspond to marker's location
            shadowAnchor: [25, 50],  // the same for the shadow
            popupAnchor:  [50 ,50] // point from which the popup should open relative to the iconAnchor

    });

    var pinIcon = L.icon({
            iconUrl: './icones/placeholder.png',

            iconSize: [30, 30], // size of the shadow
            iconAnchor:[15, 30],  // the same for the shadow
            popupAnchor:  [50 ,50] // point from which the popup should open relative to the iconAnchor

    });

    function clickPetit(){
       L.marker(coord, {icon: chairIcon}).addTo(map).bindPopup("Valider l'encombrant?");
       map.closePopup();
       var elem = document.getElementById('petit');
        elem.parentNode.removeChild(elem);
        var elem = document.getElementById('gros');
        elem.parentNode.removeChild(elem);
        var elem = document.getElementById('electro');
        elem.parentNode.removeChild(elem);
        var elem = document.getElementById('annuler');
        elem.parentNode.removeChild(elem);
      
    }
    function clickGros(){
       L.marker(coord, {icon: bedIcon}).addTo(map).bindPopup("Valider l'encombrant?");
       map.closePopup();
       
    }
    function clickElectro(){
       L.marker(coord, {icon: fourIcon}).addTo(map);
       map.closePopup();
       
    }
    function clickAnnuler(){
       map.closePopup();
       
    }

    function onMapClick(e) {
      coord = e.latlng;
      popup
          .setLatLng(coord)
          .setContent("Voulez-vous signaler un emcombrant à :  " + coord.toString())
          .openOn(map);
      document.getElementById('petit').style.display= 'block';
        
        
      
    }



    map.on('click', onMapClick);


    



  </script>
</body>

</html>






